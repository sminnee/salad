#!/usr/bin/env ruby
if ARGV.count < 1 then
	puts "Usage: $0 (browser)
"
	exit 1
end

if not File.exist?('sapphire/main.php') then
	puts "Please run $0 from within your sapphire project root.
I couldn't find ./sapphire/main.php.
"
	exit 2
end

# We can't reassign ARGV but we can manipulate its contents
browser = ARGV[1]
baseURL = `php ./sapphire/cli-script.php SapphireInfo/baseurl`
features = "*/tests/cuke/*.feature"

ARGV.clear
ARGV << browser
ARGV << baseURL
ARGV << features

# Call browsercuke
load File.dirname(__FILE__) + '/browsercuke'