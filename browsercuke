if [ "$2" = "" ]; then
	echo "Usage: $0 (browser) (url) (feature-file) (other cucumber args)
	
Run the given feature file using the URL has the test site, on the given browser.

Supported browsers:
  firefox
  safari

"
	exit 1
fi

basedir=`dirname $0`

export BROWSERSALAD_BROWSER=$1
export BROWSERSALAD_URL=$2


# Special case for Sapphire applications - collect all the step_definitions from the modules
if [ -d sapphire/tests/cuke ]; then
	for file in `ls -1d */tests/cuke/step_definitions`; do
		extras="$extras -r $file"
	done
fi

#echo "cucumber -r $basedir/support -r $basedir/step_definitions $extras $3 $4 $5 $6 $7 $8 $9"
cucumber -r $basedir/support -r $basedir/step_definitions $extras $3 $4 $5 $6 $7 $8 $9