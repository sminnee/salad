echo "Browser Salad OS X installer
===========================
"

ffbin=/Applications/Firefox.app/Contents/MacOS/firefox-bin

echo "> Installing necessary Gems"

for gem in cucumber firewatir safariwatir rb-appscript; do
	if [ "`gem list --local | grep $gem`" = "" ]; then
		echo "Installing $gem"
		sudo gem install $gem
	else
		echo "Upating $gem"
		sudo gem update $gem
	fi
done

if [ ! -f jssh-3.5.x-Darwin-param.xpi ]; then
	echo "> Downloading Firefox 3.5 JSSH plugin"
	wget http://wiki.openqa.org/download/attachments/13893658/jssh-3.5.x-Darwin-param.xpi
fi

echo "> Installing Firefox 3.5 JSSH plugin"
open ./jssh-3.5.x-Darwin-param.xpi

echo "> Please go to System Prefences -> Universal Access and check the box labelled 'Enable access for assistive devices'

When you're done, press enter to continue."

read -s -n1

echo "
Done!

You should be able to run one of these commands now:

./toss firefox http://localhost/yourtestsite create-page.feature
./toss safari http://localhost/yourtestsite create-page.feature

"